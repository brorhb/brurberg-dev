<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css"/><link rel="stylesheet" href="/styles.css"/><title>brurberg.dev</title><meta name="twitter:title" content="brurberg.dev"/><meta name="og:title" content="brurberg.dev"/></head><body class="sans-serif"><div><div><div class="tc pv4 pv5-ns"><a href="/"><img src="https://avatars3.githubusercontent.com/u/12571304?s=460&v=4" class="br-100 pa1 ba b--black-10 h3 w3" alt="Avatar"/></a><a href="/" class="no-underline"><h1 class="f5 f4-ns fw6 mid-gray">brurberg.dev</h1></a><h2 class="f6 gray fw2 ttu tracked">Just another remote app developer</h2><div class="tc pa3"><a class="f6 fw4 hover-black no-underline black-60 dn dib-ns pv2 ph3" href="/about">About</a><a class="f6 fw4 hover-black no-underline black-60 dn dib-ns pv2 ph3" href="/articles">Articles</a><a class="f6 fw4 hover-black no-underline black-60 dn dib-ns pv2 ph3" href="/projects">Projects</a></div></div></div><div class="flex flex-row justify-center"><div class="flex-column mw6"><div class="sans-serif tc"><p class="f5 fw4 gray mt0">21.06.2019</p><div class="post-tags"><a class="mr1 f6 grow no-underline br-pill ph2 pv1 mb1 dib white bg-light-blue">react-native</a><a class="mr1 f6 grow no-underline br-pill ph2 pv1 mb1 dib white bg-orange">swift</a><a class="mr1 f6 grow no-underline br-pill ph2 pv1 mb1 dib white bg-gray">javascript</a><a class="mr1 f6 grow no-underline br-pill ph2 pv1 mb1 dib white bg-green">android</a><a class="mr1 f6 grow no-underline br-pill ph2 pv1 mb1 dib white bg-blue">ios</a></div><div><div class="tl"><h1>SwiftUI and Swift Package Manager: Combine! Now with Singletons</h1><p>I want to build upon previous post. This is where we got to:</p><script src="https://gist.github.com/brorhb/32285a3b84147f5a4c8467988f74f927.js" charset="utf-8"></script><p>⬆️This is the core of the package, and this is my SwiftUI code ⬇️</p><script src="https://gist.github.com/brorhb/498f97e3dfe5d9fda03dae081154aa41.js" charset="utf-8"></script><p>Cool right! We can now return a phrase from our language package and show it’s value in a Text view 😁</p><p>What’s not so great about this is that if I want to access the language package deeper down in my view hierarchy I’m out of luck. If I want to do that, I need to create a new instance of the Language class, and I dont want to do that, since this would require me to do another fetch and a new loading process and the like. It would work, but it would be slow which is not what we are after 🤨</p><p>So what do we do now? Insert <a href="https://en.wikipedia.org/wiki/Singleton_pattern">Singletons</a>! I bet there are other ways to do this, but this is what I did.</p><p>So how do we do this? Well, we need our singleton, and this is how I did it</p><script src="https://gist.github.com/brorhb/c58f58338eba0aecd04da0ff66feeb84.js" charset="utf-8"></script><p>There is almost nothing to it… You just need to declare a public var/let that can take an instance of Language.</p><p>Now we want to use this of course. And this requires some minor changes to our ContentView.swift file, and we want to create a new SwiftUI view as a child 👶 :</p><script src="https://gist.github.com/brorhb/9cc12dafdbaf520b335e6c4ef7cc2d56.js" charset="utf-8"></script><p>We now use the public variable containing our singleton as the @ObjectBinding variable. But we still need to fetch somewhere, so let’s just to it here 😄</p><p>Now to the child view:</p><script src="https://gist.github.com/brorhb/2a1fa740e7d9b24d9277b91c820e4d62.js" charset="utf-8"></script><p>This is pretty much a replica of our old ContentView.swift file. But the well trained eye 👁 will see that we don't call the fetch method! This is because the parent did it, so we don’t need to do it again 😄 But we could still access all the variables and methods of the class 😁</p><p>Thanks for reading 🙏</p><p>This is how it looks like for me ☺️ I got some different naming, and my getPhrase needs more params but the rest is the same 😄</p><img src="https://cdn-images-1.medium.com/max/7240/1*976NOPwe0_05GN1jIJor4g.gif"/></div></div></div></div></div></div></body></html>